---
- name: include variables
  include_vars: 
    file: packages.yml
    name: packages

- name: Remove pacman packages
  pacman:
    name: "{{ item }}"
    state: absent
    update_cache: yes
  loop:
  - gnu-netcat # libvirt
  - iptables # we're installing iptables-nft, which is newer

- name: Install pacman packages
  pacman:
    name: "{{ item }}"
    state: present
    update_cache: yes
  loop: "{{ packages.pacman_added }}"